# EBS, AMI, 스냅샷 정리

## 1. EC2의 구성
- **서버**는 다음의 주요 구성 요소로 이루어짐:
  - 컴퓨팅(CPU/RAM)
  - 하드디스크(EBS가 담당)
  - 랜카드
- **EBS**는 EC2 인스턴스의 하드디스크 역할을 담당.

---

## 2. Amazon Elastic Block Store (EBS)
- AWS 클라우드에서 **Amazon EC2 인스턴스**에 사용할 영구 블록 스토리지 볼륨을 제공.
- **특징**:
  - 각 EBS 볼륨은 가용 영역 내에서 자동으로 복제되어 구성 요소 장애로부터 보호.
  - **고가용성** 및 **내구성** 제공.
  - 지연 시간이 짧고 일관된 성능으로 워크로드 실행 가능.
  - 필요 시 단 몇 분 내에 확장 가능하며, **프로비저닝한 용량만큼 비용**을 지불.
- EBS는 가상의 하드드라이브로, EC2 인스턴스 종료 후에도 데이터가 유지 가능.

---

## 3. EBS의 주요 특징
1. **EC2와 독립적**: EC2 인스턴스 종료 후에도 유지 가능.
2. **다중 연결**:
   - 하나의 인스턴스에 여러 EBS를 연결 가능.
   - 하나의 EBS를 여러 EC2에 동시에 연결 가능 (**EBS Multi Attach**).
3. **루트 볼륨 사용 시 삭제**:
   - 디폴트 설정에서는 EC2 종료 시 루트 볼륨이 삭제됨.
   - 설정을 통해 EBS를 독립적으로 유지 가능.
4. **가용 영역과 동일 위치**:
   - EC2와 같은 가용 영역 내에 위치해야 함.

---

## 4. EBS의 타입
EBS는 총 5가지 타입을 제공:
1. **범용 (General Purpose, GP3)**: SSD 기반으로 일반적인 워크로드에 적합.
2. **프로비저닝된 IOPS (Provisioned IOPS, io2)**: SSD 기반으로 고성능이 요구되는 워크로드에 적합.
3. **쓰루풋 최적화 HDD (Throughput Optimized HDD, st1)**:
   - HDD 기반으로 백업용이나 대용량 작업에 적합.
4. **콜드 HDD (Cold HDD, sc1)**:
   - 가장 저렴하며, IOPS가 낮아 느림. 백업용으로 적합.
5. **마그네틱 (Standard)**:
   - HDD 기반으로 예전부터 사용되던 타입. 최근에는 잘 사용하지 않음.

---

## 5. Snapshot
- 특정 시점의 **EBS 상태를 저장**한 저장본.
- **주요 특징**:
  1. EBS의 상태를 스냅샷으로 저장하면 원하는 시점으로 복구 가능.
  2. 스냅샷 데이터는 **Amazon S3**에 저장되며, S3는 EBS보다 저렴.
  3. **증분식 저장**:
     - 변경된 데이터만 저장되어 효율적.

---

## 6. AMI (Amazon Machine Image)
- **Amazon Machine Image**의 약자로, EC2 인스턴스를 실행하기 위한 정보 모음.
- **구성 요소**:
  1. 운영체제(OS), 아키텍처 타입(32-bit/64-bit), 저장 공간 용량 등.
  2. **EBS 스냅샷** 기반으로 구성 가능.
  3. EC2를 복제하거나 다른 리전/계정으로 전달 가능.

---

### AMI의 구성
1. **1개 이상의 EBS 스냅샷**.
2. 인스턴스 저장 인스턴스:
   - 루트 볼륨에 대한 템플릿 (예: 운영체제, 애플리케이션 서버, 애플리케이션 등).
3. **사용 권한**:
   - 특정 AWS 계정이 사용할 수 있도록 설정 가능.
4. **블록 디바이스 매핑**:
   - EC2 인스턴스에 연결되는 볼륨 정보 (EBS의 용량, 개수 등).

---

### AMI의 타입
1. **EBS 기반**:
   - 스냅샷을 기반으로 루트 디바이스 생성.
   - 네트워크 연결 기반으로 느릴 수 있음.
2. **인스턴스 스토리지 기반**:
   - S3에 저장된 템플릿을 기반으로 생성.
   - EBS가 삭제되면 데이터도 함께 삭제됨.
