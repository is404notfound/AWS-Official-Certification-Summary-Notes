# AWS에서 스케일링: Vertical Scaling (Scaling Up)

AWS에서 **스케일링**은 시스템 성능을 유지하거나 향상시키기 위해 리소스를 동적으로 조정하는 과정입니다. 스케일링에는 크게 **Vertical Scaling (스케일 업)**과 **Horizontal Scaling (스케일 아웃)** 두 가지 유형이 있습니다. 이 문서에서는 **Vertical Scaling**과 **Horizental Scaling**, 그리고 **Auto Scaling**에 대해 설명합니다.

---

## 1. Vertical Scaling(스케일 업) 이란?

**Vertical Scaling**은 기존의 인스턴스나 리소스의 크기(성능)를 높이는 방식의 스케일링입니다. 즉, 더 강력한 CPU, 메모리, 스토리지를 가진 인스턴스로 업그레이드하거나 리소스 용량을 증가시키는 것을 의미합니다.

- **예시**: 
  - EC2 인스턴스를 t2.micro에서 t3.large로 업그레이드
  - RDS의 데이터베이스 인스턴스 크기를 db.t2.medium에서 db.m5.large로 변경

---

## 2. Vertical Scaling의 특징

### 장점

1. **단순성**
   - 기존 애플리케이션이나 아키텍처를 변경할 필요 없이 인스턴스 사양을 업그레이드하면 됩니다.
   
2. **신속성**
   - 필요한 리소스를 즉시 업그레이드할 수 있어 단기적인 성능 향상에 유리합니다.
   
3. **애플리케이션 호환성**
   - 대부분의 단일 서버 기반 애플리케이션이 별도의 수정 없이 스케일 업 방식에서 성능이 개선됩니다.

### 단점

1. **확장 한계**
   - 단일 서버나 인스턴스에는 물리적인 한계가 존재합니다. 
   - 예를 들어, 가장 높은 사양의 EC2 인스턴스도 트래픽이나 처리량 요구를 초과할 수 있습니다.

2. **비용 증가**
   - 더 강력한 리소스는 비용이 높아질 수 있으며, 성능 대비 효율이 떨어질 수 있습니다.

3. **다운타임 필요**
   - 기존 인스턴스를 업그레이드할 때 서비스가 일시적으로 중단될 가능성이 있습니다.

---

## 3. AWS에서 Vertical Scaling 적용 방법

### 3.1 EC2 (Elastic Compute Cloud)

EC2 인스턴스의 크기를 변경하려면 다음 단계를 따릅니다:

1. **인스턴스 중지**
   - EC2 인스턴스를 변경하기 전에 반드시 인스턴스를 중지해야 합니다.

2. **인스턴스 유형 변경**
   - AWS Management Console 또는 CLI를 사용하여 더 큰 인스턴스 유형으로 변경합니다.

   ```bash
   aws ec2 modify-instance-attribute --instance-id <INSTANCE_ID> --instance-type "t3.large"
   ```

3. **인스턴스 시작**
   - 업그레이드한 인스턴스를 다시 시작합니다.

### 3.2 RDS (Relational Database Service)

RDS 인스턴스의 크기를 변경하려면 다음 단계를 따릅니다:

1. **수정 시작**
   - AWS Console에서 RDS 인스턴스를 선택하고 **Modify**를 클릭합니다.

2. **인스턴스 사양 변경**
   - 새로운 DB 인스턴스 클래스(e.g., db.m5.large)를 선택합니다.

3. **적용**
   - 변경 사항을 즉시 적용하거나, 지정된 메인터넌스 기간 동안 적용되도록 설정할 수 있습니다.

4. **다운타임 고려**
   - RDS 인스턴스 크기 변경 시 일부 다운타임이 발생할 수 있습니다.

### 3.3 Auto Scaling Group에서 Vertical Scaling

Auto Scaling Group은 기본적으로 **Horizontal Scaling**에 사용되지만, 필요한 경우 그룹 내의 EC2 인스턴스 크기를 수동으로 변경하여 Vertical Scaling을 적용할 수 있습니다.

---

## 4. Vertical Scaling vs Horizontal Scaling

| **항목**            | **Vertical Scaling**                  | **Horizontal Scaling**                  |
|---------------------|------------------------------------|------------------------------------|
| **확장 방식**       | 리소스 크기를 키움                     | 리소스 개수를 늘림                      |
| **애플리케이션 수정** | 필요 없음                             | 분산 처리 구조가 필요                    |
| **확장 한계**       | 물리적 한계 존재                       | 리소스 추가로 무한 확장 가능               |
| **비용**            | 단일 리소스 비용 증가                   | 여러 리소스의 운영 비용 증가               |
| **예시**            | EC2 t2.micro → t3.large           | EC2 인스턴스 1대 → 3대                  |

---

## 5. Vertical Scaling이 적합한 경우

Vertical Scaling은 다음과 같은 상황에서 적합합니다:

1. **단기적 성능 향상이 필요한 경우**
   - 긴급히 리소스 성능을 업그레이드해야 할 때 적합합니다.

2. **단일 서버 기반 애플리케이션**
   - 데이터베이스와 같이 단일 인스턴스에서 처리되어야 하는 워크로드에 적합합니다.

3. **소규모 트래픽**
   - 트래픽 규모가 크지 않거나 확장이 자주 필요하지 않은 경우 효과적입니다.

---

## 6. Horizontal Scaling(스케일 아웃) 이란?

**Horizontal Scaling**은 동일한 역할을 하는 리소스를 여러 대 추가하여 확장하는 방식의 스케일링입니다. 즉, 기존의 단일 인스턴스 대신 여러 인스턴스를 병렬로 실행하여 부하를 분산 처리하는 구조입니다.

- **예시**: 
  - EC2 인스턴스를 1대에서 3대로 증가시키고 로드 밸런서를 통해 트래픽을 분산
  - RDS 읽기 부하를 분산하기 위해 읽기 전용 복제본(Read Replica) 추가

---

## 7. Horizontal Scaling의 특징

### 장점

1. **무한 확장 가능**
   - 리소스를 추가로 배포함으로써 물리적 한계를 극복할 수 있습니다.

2. **고가용성**
   - 다수의 리소스를 사용하므로 일부 리소스가 장애를 겪더라도 서비스 중단이 최소화됩니다.

3. **트래픽 분산**
   - 로드 밸런서를 통해 트래픽이 여러 리소스에 분산되므로 성능 저하를 방지할 수 있습니다.

### 단점

1. **복잡성 증가**
   - 분산된 리소스를 관리하고 애플리케이션이 병렬 처리를 지원하도록 수정해야 합니다.

2. **비용 증가**
   - 다수의 인스턴스를 운영하기 위한 추가 비용이 발생합니다.

3. **초기 설정 필요**
   - 로드 밸런서 설정, 데이터 분산, 애플리케이션 구성 변경 등 초기 작업이 필요합니다.

---

## 8. Auto Scaling (오토 스케일링)

**Auto Scaling**은 AWS에서 제공하는 기능으로, 사전에 정의된 조건에 따라 리소스를 자동으로 추가하거나 제거하여 워크로드 변화에 대응합니다. 일반적으로 Horizontal Scaling을 자동화하기 위해 사용됩니다.

### 주요 구성 요소

1. **Auto Scaling Group**
   - 스케일링 작업이 적용되는 EC2 인스턴스 그룹입니다.

2. **Launch Template/Configuration**
   - 새로 생성되는 인스턴스에 대한 설정(CPU, 메모리, 네트워크 등)을 정의합니다.

3. **Scaling Policy**
   - 스케일링 조건(예: CPU 사용률이 80%를 초과하면 인스턴스 추가)을 설정합니다.

### Auto Scaling 설정 단계

1. **Auto Scaling 그룹 생성**
   - AWS Management Console에서 Auto Scaling Group을 생성합니다.

2. **스케일링 정책 설정**
   - CPU 사용률, 네트워크 트래픽 등 조건에 따라 인스턴스를 추가하거나 제거하는 규칙을 정의합니다.

3. **로드 밸런서 연결**
   - Auto Scaling Group과 로드 밸런서를 연동하여 트래픽을 자동으로 분산시킵니다.

### Auto Scaling의 장점

1. **동적 확장**
   - 워크로드 변화에 따라 리소스를 자동으로 조정합니다.

2. **비용 효율성**
   - 필요할 때만 리소스를 추가로 배포하여 비용 낭비를 줄입니다.

3. **가용성 보장**
   - 리소스가 장애를 겪더라도 자동으로 대체 인스턴스를 생성합니다.

---

## 9. Vertical Scaling vs Horizontal Scaling

| **항목**            | **Vertical Scaling**                  | **Horizontal Scaling**                  |
|---------------------|------------------------------------|------------------------------------|
| **확장 방식**       | 리소스 크기를 키움                     | 리소스 개수를 늘림                      |
| **애플리케이션 수정** | 필요 없음                             | 분산 처리 구조가 필요                    |
| **확장 한계**       | 물리적 한계 존재                       | 리소스 추가로 무한 확장 가능               |
| **비용**            | 단일 리소스 비용 증가                   | 여러 리소스의 운영 비용 증가               |
| **예시**            | EC2 t2.micro → t3.large           | EC2 인스턴스 1대 → 3대                  |

---
