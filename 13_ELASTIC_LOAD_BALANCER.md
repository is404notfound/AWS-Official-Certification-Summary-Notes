# Elastic Load Balancer (ELB)

1. **로드밸런싱**

- 로드밸런싱은 여러 인스턴스로 트래픽을 분배하는 기술로, 주로 안정적인 서비스 운영을 위해 사용됩니다. 특히 오토 스케일링을 활용하여 서비스의 확장을 자동으로 처리하는 방식이 일반적입니다. 하지만 이 방식에는 몇 가지 단점이 있습니다.

- 여러 인스턴스의 IP 주소 문제: 오토 스케일링을 통해 인스턴스 수를 동적으로 확장하더라도, 사용자는 각 인스턴스의 IP 주소를 알고 있어야 합니다. 이는 관리 및 유지보수에 어려움을 줄 수 있습니다.

- 하나의 인스턴스에 유저가 몰리는 문제: 만약 하나의 인스턴스에 너무 많은 유저가 몰리면, 해당 인스턴스의 처리 능력을 초과하게 되어 서비스 성능이 저하될 수 있습니다. 이때, 로드밸런싱을 통해 트래픽을 적절히 분배하지 않으면, 특정 인스턴스가 과부하 상태에 빠지거나 서버 다운과 같은 문제가 발생할 수 있습니다.

결론적으로, 오토 스케일링 그룹은 매우 유용하지만, 로드밸런싱이 없다면 인스턴스들 간의 트래픽 분배가 제대로 이루어지지 않아 안정적인 서비스 제공이 어려울 수 있습니다.

---

2. **엘라스틱 로드 밸런서 (ELB)**

Elastic Load Balancing (ELB)는 AWS에서 제공하는 로드밸런싱 서비스로, 사용자의 트래픽을 여러 인스턴스에 효율적으로 분배하는 역할을 합니다.

- 트래픽 경로 통합: ELB는 다수의 유저 트래픽을 하나의 경로로 묶어서 관리합니다. 이를 통해 사용자는 별도의 인스턴스 IP를 알 필요 없이, ELB에 접속하면 자동으로 트래픽이 적절한 인스턴스로 분배됩니다.

- 트래픽 분산: ELB는 유입된 트래픽을 여러 인스턴스로 균등하게 분배하여, 각 인스턴스의 부하를 최소화하고, 서비스의 가용성과 성능을 향상시킵니다.

---

3. **ELB의 특징 및 기능**

ELB는 다수의 서비스에 트래픽을 분산시켜주는 서비스입니다. 주요 특징 및 기능은 다음과 같습니다.

- **Health Check**: ELB는 직접 트래픽을 발생시켜 인스턴스의 상태를 주기적으로 확인합니다. 이를 통해 정상적으로 작동하지 않는 인스턴스로 트래픽이 전달되지 않도록 합니다.

- **Auto Scaling 연동**: ELB는 Auto Scaling과 연동하여, 인스턴스 수가 자동으로 조절될 때에도 트래픽을 효과적으로 분배할 수 있습니다.

- **다중 가용 영역 분산**: ELB는 여러 가용 영역에 인스턴스를 분산시켜, 특정 가용 영역에 장애가 발생하더라도 서비스의 가용성을 유지할 수 있도록 합니다.

- **동적 IP 주소**: ELB는 지속적으로 IP 주소가 변경되므로, IP 주소를 직접 사용하는 것이 아닌 도메인 기반으로 사용해야 합니다. 따라서 화이트리스트 등을 작성할 때에도 IP 주소가 아닌 주소(address) 기반으로 작성해야 합니다.

---

4. **ELB의 종류**

ELB는 총 4가지 종류를 제공합니다.

- **Application Load Balancer (ALB)**: 사용자의 트래픽 정보를 모니터링하여 라우팅할 수 있습니다. 예를 들어, 사용자가 접속한 도메인 정보에 따라 트래픽을 분산시킬 수 있습니다. HTTP/HTTPS 트래픽에 특화되어 있으며, 7계층(Application Layer)에서 동작합니다.

- **Network Load Balancer (NLB)**: 매우 빠른 로드 밸런서로, TCP 기반의 빠른 트래픽 분산에 적합합니다. Elastic IP 할당이 가능하여 IP를 고정할 수 있다는 장점이 있습니다. 4계층(Transport Layer)에서 동작합니다.

- **Classic Load Balancer (CLB)**: 과거에 많이 사용되었던 로드 밸런서로, 최근에는 사용 빈도가 낮습니다. 레거시 프로젝트에 많이 남아 있을 가능성이 있습니다. 4계층과 7계층 모두에서 동작 가능합니다.

- **Gateway Load Balancer (GWLB)**: 트래픽을 특정 가상 어플라이언스로 전달하여 보안 검사, 침입 방지 등 네트워크 기능을 수행하도록 합니다. 트래픽을 먼저 체크하는 역할을 합니다.

---

5. **대상 그룹 (Target Group)**

대상 그룹은 ALB가 트래픽을 라우팅할 대상의 집합입니다. 대상 그룹은 다음과 같은 구성 요소를 가질 수 있습니다.

- **Instance**: EC2 인스턴스
- **IP (private)**: 개인 IP 주소
- **Lambda**: AWS Lambda 함수 (서버리스 서비스)
- **ALB**: 다른 ALB

대상 그룹은 다음과 같은 설정을 포함합니다.

- **프로토콜**: HTTP, HTTPS, gRPC 등
- **트래픽 분산 알고리즘**: 라운드 로빈, 최소 연결 등
- **고정 세션 (Sticky Session)**: 특정 클라이언트의 요청을 항상 동일한 인스턴스로 전달하는 기능
